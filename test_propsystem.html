<!DOCTYPE html>
<html>
<head>
  <title>PropSystem Test</title>
  <meta charset="utf-8">
</head>
<body>
  <h1>PropSystem 测试页面</h1>
  <p>检查 PropSystem 是否正确加载和初始化...</p>
  <div id="result"></div>

  <!-- 加载游戏脚本 -->
  <script src="./game/js/propSystem.js"></script>
  <script>
    // 检查 PropSystem 是否存在
    const resultDiv = document.getElementById('result');
    
    if (typeof window.PropSystem !== 'undefined') {
      resultDiv.innerHTML += '<p style="color: green;">✓ window.PropSystem 已定义</p>';
      
      try {
        const propSystem = new window.PropSystem();
        resultDiv.innerHTML += '<p style="color: green;">✓ PropSystem 构造函数工作正常</p>';
        
        // 测试初始化玩家道具
        propSystem.initPlayerProps(1);
        resultDiv.innerHTML += '<p style="color: green;">✓ initPlayerProps 方法工作正常</p>';
        
        // 测试获取玩家道具
        const props = propSystem.getPlayerProps(1);
        resultDiv.innerHTML += `<p style="color: green;">✓ getPlayerProps 返回道具数量: ${props.length}</p>`;
        
        // 测试使用道具
        if (props.length > 0) {
          const result = propSystem.useProp(1, props[0].id, 2);
          resultDiv.innerHTML += `<p style="color: green;">✓ useProp 方法调用成功: ${result}</p>`;
        }
        
        resultDiv.innerHTML += '<p style="color: blue; font-weight: bold;">PropSystem 测试完成，一切正常！</p>';
      } catch (error) {
        resultDiv.innerHTML += `<p style="color: red;">✗ 初始化 PropSystem 时出错: ${error.message}</p>`;
      }
    } else {
      resultDiv.innerHTML += '<p style="color: red;">✗ window.PropSystem 未定义</p>';
    }
    
    // 检查全局作用域中的 PropSystem
    if (typeof PropSystem !== 'undefined') {
      resultDiv.innerHTML += '<p style="color: green;">✓ 全局 PropSystem 已定义</p>';
    } else {
      resultDiv.innerHTML += '<p style="color: orange;">! 全局 PropSystem 未定义</p>';
    }
  </script>
</body>
</html>